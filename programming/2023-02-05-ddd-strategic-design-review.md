# 도메인 주도 설계 - 4부 전략적 설계를 읽고
## 전략적 설계는 무엇인가?
```
세 가지 원칙은 누구도 완벽하게 이해할 수 없도록 불규칙하게 뻗어나간 시스템에서도 훌륭한 설계를 만들어 내는 데 기여한다.
```
전략적 설계 서문에 나오는 내용이다.  
훌륭한 설계를 위한 원리 및 방법이라고 볼 수 있겠다.  
에릭 에반스가 [직접 요약한 DDD문서](https://domainlanguage.com/wp-content/uploads/2016/05/DDD_Reference_2015-03.pdf) 에서도 대략의 내용을 볼 수 있다.

## 전략적 설계의 3가지 주제 
전략적 설계를 위한 3가지 주제(컨텍스트, 디스틸레이션, 대규모구조)는 여러가지 하위 항목(방법)을 가지고 있다.  
아래 내용은 내 나름대로 읽고 배운 것을 짧게 정리한 것이다. 나의 무지와 경험부족으로 잘 못 정리되어 있을 수 있다.

### 컨텍스트(CONTEXT)
팀(BOUNDED CONTEXT)과 팀이 잘 협업하기 위한 방법들.
* BOUNDED CONTEXT: 의사소통하는 개인들의 집합(팀)으로 경계를 만들어라.
* CONTINUOUS INTEGRATION: 자동화된 테스트와 함께 모든 코드와 그 밖의 구현 산출물을 빈번하게 병합하는 프로세스를 수립하라.
* CONTEXT MAP: BOUNDED CONTEXT간의 관계를 설명하라.
* SHARED KERNEL: 두 컨텍스트 간에 공유하기로 한 코드의 부분집합을 명시하고 각별히 관리하라.  
* CUSTOMER/SUPPLIER DEVELOPMENT TEAM: 클라이언트와 서버를 구분하고 클라이언트 → 서버 단방향의존 하라.  
* CONFORMIST: 서버의 인터페이스를 미리 약속하고 변경하지마라.  
* ANTICORRUPTION LAYER: 다른 시스템을 직접의존하지 말고, 계층을 두어 격리하라.  
* SEPARATE WAYS: 반드시 통합되야 하는 것은 아니니, 다른 컨텍스트와 관계를 끊어라.  
* OPEN HOST SERVICE: 각 클라이언트 맞춤 인터페이스를 제공하지말고, 공통 인터페이스로 단순화해라.  
* PUBLISHED LANGUAGE: 컨텍스트간에 공통 언어를 사용해라.  

### 디스틸레이션(distillation: 증류)
도메인 모델의 정수를 추출하는 방법들.
* CORE DOMAIN: 가장 가치 있고 전문화된 개념을 찾아 구분하고 부각시켜라.  
* GENERIC SUBDOMAIN: 일반적/부수적인/덜중요한 도메인을 core에서 분리하라.  
* DOMAIN VISION STATEMENT: core domain을 그것이 가져올 가치와 함께 짧게 기술하라.  
* HIGHLIGHTED CORE: DVS의 이해를 돕기위해 3~7page 분량의 문서를 작성하라.  
* COHESIVE MECHANISM: domain은 무엇(인터페이스)을 표현하는데 집중하고, 어떻게(구현)를 분리하라.  
* SEGREGATED CORE: core domain에서 지원요소(덜 핵심)를 찾고 분리하여, 응집력을 높여라.  
* ABSTRACT CORE: core domain에서 공통 인터페이스를 표현할 수 있는 경우, 다형성을 이용해 단순화해라.  

### 대규모구조(Large-scale structure)
넓은 시각으로 시스템에 관해 토의하고 이해하게끔 돕는 방법들.  
대규모구조는 선택사항이다.
* EVOLVING ORDER: 설계가 애플리케이션과 함께 발전/변화할 수 있게 하라. 세부설계과 모델의 변화를 과도하게 제약말라.  
* SYSTEM METAPHOR: 팀원들의 이해를 돕는 비유가 나타나면, 공통언어로 삼아 일관성을 증진하라.  
* RESPONSIBILITY LAYER: 경험을 통해, 도메인 요소를 서로 다른 책임으로 구분할 수 있다면, 그에 맞게 설계를 변경하라.  
* KNOWLEDGE LEVEL: 문제를 단순화하기 위해, 객체를 속성과 행동에 따라 구분(타입)하라.  
* PLUGGABLE COMPONENT FRAMEWORK: 잘 정제된 core domain은 추상화를 통해 다양한 구현을 대체할 수 있다.

## 익스트림 프로그래밍
전략적 설계 파트내내 계속 반복되어 이야기 되는 것이 익스트림 프로그래밍이다.  
저자는 익스트림 프로그래밍의 실천방법중 특히  
반복주기, 전체팀(도메인전문가와 밀접한관계)를 강조한다.  
거기에 더해 지속적 통합, 리팩토링(점진적 설계)등이 계속 등장한다. CI는 자동화된 테스트 없이 생각할 수 없다.  
마틴 파울러에 따르면, [저자는 xp의 강력한 지지자이고, DDD를 xp접근방식의 자연스러운 구성요소로 보고 있다고 한다.](https://martinfowler.com/bliki/DomainDrivenDesign.html)   
나도 책을 읽으며 공감했다.

## 소감
4부를 읽기전에도 DDD에 용어들을 알고 있었다.  
oop에서 은닉/캡슐화를 위해 속성과 행동을 숨기고 메세징만 이용하는데,  
바운디드 컨텍스트나 애그리거트는 oop와 뭐가 다를까? 라는 의문이 있었다.

마틴 파울러가
```
DDD의 특히 중요한 부분은 대규모 도메인을 제한된 컨텍스트 네트워크로 구성하는 방법인 전략적 설계의 개념입니다.
```
라고 이야기 한 것처럼,
* 여러사람간의 코웍
* 복잡성이 높아져도 지속가능한 시스템
이 필요한 일정 규모이상의 프로젝트에서, 전략적 설계의 지침들이 더욱 필요한 것 같다.

도메인 모델링을 할때 무엇이 더 나은 것인지, 참고할만한 지침을 알지 못해 답답한적이 꽤 있었다.  
이 책이 좋은 사수가 되어줄 수 있지 않을까.