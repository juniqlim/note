# Kent Beck의 Genie Sessions: Optionality

Kent Beck이 AI(Genie)와 함께 GPU 기반 sorted map 데이터 구조를 개발하는 라이브 코딩 세션 트랜스크립트.

## 세션 개요

- **주제**: GPU sorted map 데이터 구조 개발
- **도구**: Cursor (IDE), WGPU (Rust GPU 라이브러리)
- **원칙**: Make it run, make it right, make it fast

## 핵심 내용

### Sorted Map 데이터 구조
4가지 연산:
1. **Get** - 값 조회
2. **Put** - 값 저장
3. **Delete** - 값 삭제 (tombstone 방식)
4. **Iterate** - 특정 키 범위 순회

### Augmented Development의 핵심 스킬

1. **호기심 (Curiosity)**: "이게 어떻게 작동하는 거지?"라고 질문하기
2. **놀이 감각 (Sense of Play)**: 되돌릴 수 있고, 해롭지 않고, 불법/비윤리적이지 않다면 그냥 시도해보기

### GPU 동작 방식 (동화 버전)

> WGPU 왕국에 Slab이라는 조용한 왕국이 있었다. Slab은 키를 완벽한 순서로 유지했고, Meta라는 현명한 관리자가 왕국의 길이를 항상 알고 있었다.
>
> 어느 날, 여행자가 키 목록을 가져와 왕국에 값을 요청했다. 여왕(프로그램)은 여행을 위해 세 가지 선물을 준비했다:
> - 메신저가 읽을 키 두루마리 (keys buffer)
> - 답이 기록될 빈 장부 (results buffer)
> - 키가 몇 개인지 알려주는 작은 메모
>
> 여왕은 64명의 스프라이트를 소환했다. 각 스프라이트는 키 하나를 가져가 Slab으로 달려가 빠른 이진 검색을 수행했다. 키를 찾으면 장부에 값을 새기고 "찾음"으로 표시했다. 찾지 못하면 페이지를 비워두었다. 모든 스프라이트가 돌아오면 장부가 경계를 넘어 돌아갔다(readback). 그리고 여왕의 서기관들이 표시를 여행자를 위한 답 목록으로 번역했다.

### 코드 구조화 원칙

**"Grow then Split" (성장 후 분리)**
- 분리할 때가 되기 전에 분리하지 않는다
- 하나의 파일이 커지면 그때 분리한다
- 생물학의 세포 분열처럼: 세포가 점점 커지다가 팽팽해지면 그때 분리됨

**파일 분리 시점**
- 모든 가능한 것이 op struct로 이동된 후에 ops.rs로 분리
- Genie가 단일 파일에서만 작업할 때 더 잘 동작함
- 두 파일에 걸친 변경이 필요하면 다시 병합했다가 추출

### WGPU API에 대한 관찰

- "순수한 lumper API" - 모든 유연성이 있지만 추상화가 없음
- Lumpers: 모든 것을 한 곳에서 보길 좋아함
- Splitters: 작은 것들을 조합해서 솔루션을 만들길 좋아함
- "여기엔 100% 누락된 추상화가 있다"

### Genie의 특성

**장점:**
- 시간이 생김 - 2-3분, 5분의 여유가 생겨서 대화하거나 커피 마실 수 있음
- 페어링 + Genie 조합이 좋음

**단점:**
- 하위 호환성에 집착함 - 아무도 호출하지 않는 코드의 하위 호환성을 위해 복잡성 추가
- 하위 호환성이 왜/언제 유용한지, 언제 불필요한지에 대한 개념이 없음

### 성능 결과 (100만 요소 기준)

- **Put**: GPU가 CPU보다 3배 빠름
- **Get**: GPU가 CPU보다 30배 빠름

### Bazinga 워크플로우

```
"bazinga"라고 말하면:
1. 테스트 실행
2. 모두 통과하면 Perf 실행 및 결과 저장
3. 커밋 및 푸시
```

## Kent Beck의 철학

### Augmented Development에 대해
- 작업이 저렴해지면 버리고 다시 할 수 있다
- 이것은 augmented development의 기본 스킬 중 하나

### 왜 이 일을 하는가
1. 생계 유지
2. 정말 즐김 - "나는 천국에 있다. 이 모든 복잡한 코드가 있고 이해하지 못하지만 진전을 이뤄야 한다"
3. 커뮤니티에 대한 봉사 - "geeks가 세상에서 안전함을 느끼도록 돕는 것이 내 미션"

### AI와 코드 가독성
- 여전히 인간을 위해 코드를 작성하고 있음
- 이해하지 못하면 Genie가 실수하는 것을 막을 수 없음
- 학습 기회로 삼는다면 코드가 어떻게 보이는지가 중요

### AI에 대한 다양한 반응
- 무비판적 치어리더
- 무비판적 비평가 ("절대 안 써")
- 그 사이의 많은 사람들

## 리소스

- **GitHub**: kentbeck/gpu-sorted-map (optionality 브랜치)
- **조언**: "Fork해서 Genie로 실행해보고, 백만 가지 다른 것들을 시도하고, 많은 결과를 버릴 준비를 하고, 학습을 극대화하라"

---

*Kent Beck의 Substack Genie Sessions 라이브스트림에서 발췌 (2025)*
